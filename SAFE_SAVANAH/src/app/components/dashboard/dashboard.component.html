<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <h2 class="text-3xl font-bold text-gray-900 mb-2">SafeSavannah Dashboard</h2>
    <p class="text-gray-600">Real-time wildlife monitoring and community reports overview</p>
  </div>

  <!-- Key Metrics Grid -->
  <div class="metrics-grid">
    <!-- Total Animals -->
    <div class="metric-card">
      <div class="metric-icon">üêæ</div>
      <div class="metric-content">
        <div class="metric-number">{{ dashboardStats.totalAnimals }}</div>
        <div class="metric-label">Total Animals</div>
        <div class="metric-sublabel">{{ dashboardStats.activeAnimals }} active</div>
      </div>
    </div>

    <!-- Active Alerts -->
    <div class="metric-card">
      <div class="metric-icon">üö®</div>
      <div class="metric-content">
        <div class="metric-number">{{ alertStats.total }}</div>
        <div class="metric-label">Active Alerts</div>
        <div class="metric-sublabel">{{ alertStats.unread }} unread</div>
      </div>
    </div>

    <!-- Critical Situations -->
    <div class="metric-card critical">
      <div class="metric-icon">‚ö†Ô∏è</div>
      <div class="metric-content">
        <div class="metric-number">{{ alertStats.byPriority.critical + alertStats.byPriority.high }}</div>
        <div class="metric-label">High Priority</div>
        <div class="metric-sublabel">{{ alertStats.byPriority.critical }} critical</div>
      </div>
    </div>

    <!-- Battery Issues -->
    <div class="metric-card warning">
      <div class="metric-icon">üîã</div>
      <div class="metric-content">
        <div class="metric-number">{{ dashboardStats.lowBatteryAnimals + dashboardStats.criticalBatteryAnimals }}</div>
        <div class="metric-label">Battery Issues</div>
        <div class="metric-sublabel">{{ dashboardStats.criticalBatteryAnimals }} critical</div>
      </div>
    </div>

    <!-- Today's Activity -->
    <div class="metric-card">
      <div class="metric-icon">üìä</div>
      <div class="metric-content">
        <div class="metric-number">{{ dashboardStats.recentActivity.alertsToday }}</div>
        <div class="metric-label">Today's Alerts</div>
        <div class="metric-sublabel">{{ dashboardStats.recentActivity.criticalAlertsToday }} critical</div>
      </div>
    </div>

    <!-- Community Reports -->
    <div class="metric-card">
      <div class="metric-icon">üë•</div>
      <div class="metric-content">
        <div class="metric-number">{{ getUnresolvedReports().length }}</div>
        <div class="metric-label">Pending Reports</div>
        <div class="metric-sublabel">{{ getHighPriorityReports().length }} high priority</div>
      </div>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Species Distribution -->
      <div class="content-card">
        <h3 class="card-title">Species Distribution</h3>
        <div class="species-list">
          <div *ngFor="let species of getSpeciesEntries()" class="species-item">
            <div class="species-info">
              <span class="species-name">{{ species.key }}</span>
              <span class="species-count">{{ species.value }}</span>
            </div>
            <div class="species-bar">
              <div class="species-fill" 
                   [style.width.%]="(species.value / dashboardStats.totalAnimals) * 100"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Health Status -->
      <div class="content-card">
        <h3 class="card-title">Animal Health Status</h3>
        <div class="health-stats">
          <div *ngFor="let health of getHealthEntries()" 
               class="health-item">
            <div class="health-info">
              <span class="health-label" [class]="getHealthStatusClass(health.key)">
                {{ health.key | titlecase }}
              </span>
              <span class="health-count">{{ health.value }}</span>
            </div>
            <div class="health-percentage">
              {{ ((health.value / dashboardStats.totalAnimals) * 100).toFixed(1) }}%
            </div>
          </div>
        </div>
      </div>

      <!-- Conservation Status -->
      <div class="content-card" *ngIf="getConservationEntries().length > 0">
        <h3 class="card-title">Conservation Status</h3>
        <div class="conservation-stats">
          <div *ngFor="let status of getConservationEntries()" 
               class="conservation-item">
            <div class="conservation-info">
              <span class="conservation-label">{{ status.key | titlecase }}</span>
              <span class="conservation-count">{{ status.value }}</span>
            </div>
            <div class="conservation-indicator"
                 [class]="status.key === 'endangered' ? 'critical' : status.key === 'vulnerable' ? 'warning' : 'stable'">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="right-column">
      <!-- Recent Alerts -->
      <div class="content-card">
        <h3 class="card-title">Recent Alerts</h3>
        <div class="alerts-list" *ngIf="recentAlerts.length > 0; else noAlerts">
          <div *ngFor="let alert of recentAlerts; trackBy: trackByAlertId" 
               class="alert-item">
            <div class="alert-priority" [class]="getPriorityClass(alert.priority)">
              {{ alert.priority.toUpperCase() }}
            </div>
            <div class="alert-content">
              <div class="alert-title">{{ alert.title }}</div>
              <div class="alert-time">{{ getTimeAgo(alert.timestamp) }}</div>
            </div>
          </div>
        </div>
        <ng-template #noAlerts>
          <div class="empty-state">
            <div class="empty-icon">‚úÖ</div>
            <div class="empty-message">No recent alerts</div>
          </div>
        </ng-template>
      </div>

      <!-- Critical Animals -->
      <div class="content-card">
        <h3 class="card-title">Animals Requiring Attention</h3>
        <div class="animals-list" *ngIf="criticalAnimals.length > 0; else noIssues">
          <div *ngFor="let animal of criticalAnimals; trackBy: trackByAnimalId" 
               class="animal-item">
            <div class="animal-info">
              <div class="animal-name">{{ animal.name }}</div>
              <div class="animal-details">
                <span class="animal-species">{{ animal.species }}</span>
                <span *ngIf="animal.batteryLevel !== undefined" 
                      class="animal-battery" 
                      [class]="getBatteryClass(animal.batteryLevel)">
                  üîã {{ animal.batteryLevel.toFixed(0) }}%
                </span>
              </div>
            </div>
            <div class="animal-status">
              <span class="health-badge" [class]="getHealthStatusClass(animal.health)">
                {{ animal.health | titlecase }}
              </span>
            </div>
          </div>
        </div>
        <ng-template #noIssues>
          <div class="empty-state">
            <div class="empty-icon">üü¢</div>
            <div class="empty-message">All animals healthy</div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- Villager Reports Section -->
  <div class="reports-section">
    <div class="section-header">
      <h3 class="section-title">Community Reports</h3>
      <div class="section-stats">
        <span class="stat-item">{{ villagerReports.length }} total</span>
        <span class="stat-item">{{ getUnresolvedReports().length }} pending</span>
        <span class="stat-item">{{ getHighPriorityReports().length }} high priority</span>
      </div>
    </div>

    <div class="reports-grid">
      <div *ngFor="let report of villagerReports.slice(0, 6); trackBy: trackByReportId" 
           class="report-card"
           [class.high-priority]="report.priority === 'high'">
        
        <div class="report-header">
          <div class="report-meta">
            <span class="report-id">{{ report.id }}</span>
            <span class="report-time">{{ getTimeAgo(report.timestamp) }}</span>
          </div>
          <div class="report-badges">
            <span class="priority-badge" [class]="getReportPriorityClass(report.priority)">
              {{ report.priority.toUpperCase() }}
            </span>
            <span class="status-badge" [class]="getReportStatusClass(report.status)">
              {{ report.status | titlecase }}
            </span>
          </div>
        </div>

        <div class="report-content">
          <div class="report-type">{{ getReportTypeDisplayName(report.reportType) }}</div>
          <div class="report-location">üìç {{ report.location }}</div>
          <div class="report-reporter">üë§ {{ report.reporterName }}</div>
          <div class="report-description">{{ report.description }}</div>
        </div>

        <div class="report-actions" *ngIf="report.status !== 'resolved' && report.status !== 'dismissed'">
          <button 
            (click)="markReportAsResolved(report.id)"
            class="action-btn resolve-btn">
            Resolve
          </button>
          <button 
            (click)="markReportAsDismissed(report.id)"
            class="action-btn dismiss-btn">
            Dismiss
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="villagerReports.length > 6" class="view-more">
      <button class="view-more-btn">
        View All {{ villagerReports.length }} Reports
      </button>
    </div>
  </div>
</div>